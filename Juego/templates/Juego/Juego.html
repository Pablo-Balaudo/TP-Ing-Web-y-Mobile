{% extends "Juego/Base.html" %}
{% load static %}


{% block titulo %}

    <title>Juego</title>

{% endblock titulo %}

{% block contenido %}
    
    <head>
        



    </head>

    <body>
        

        <section id="presentacion-juego">
            <div class="c-center">
                <h1 id="titulo">LIENZO ACTUAL</h1>
                <p>Â¡Pinta y colabora con gente de todo el mundo para hacer arte pixeleado!</p>
            </div>
        </section>
        <p id="x">Coord X</p>
        <p id="y">Coord Y</p>


        <div class="row c-center">
            <div id="BotonesColores">
                {% if user.is_authenticated %}
                        {% if request.user.is_superuser %}
                            <div class="btn-group">
                                <button onclick="drawBoard()">Reset</button>
                            </div>
                        {% endif %}
                        <div class="btn-group" role="group" aria-label="Sub-Button group 1">
                            <button onclick="cambiarColor([255,255,255,255])">Blanco</button>
                            <button onclick="cambiarColor([255,255,255,127])">Plateado</button>
                            <button onclick="cambiarColor([127,127,127,127])">Gris</button>
                            <button onclick="cambiarColor([0,0,0,1])">Negro</button>
                            <button onclick="cambiarColor([255,0,0,255])">Rojo</button>
                        </div>
                        <div class="btn-group" role="group" aria-label="Sub-Button group 2">
                            <button onclick="cambiarColor([255,0,0,127])">Rojo Oscuro</button>
                            <button onclick="cambiarColor([255,255,0,255])">Amarillo</button>
                            <button onclick="cambiarColor([255,255,0,127])">Amarillo Oscuro</button>
                            <button onclick="cambiarColor([255,0,255,255])">Rosado</button>
                            <button onclick="cambiarColor([255,0,255,127])">Rosado Oscuro</button>
                        </div>
                        <div class="btn-group" role="group" aria-label="Sub-Button group 3">
                            <button onclick="cambiarColor([0,255,0,255])">Verde</button>
                            <button onclick="cambiarColor([0,255,0,127])">Verde Oscuro</button>
                            <button onclick="cambiarColor([0,255,255,255])">Cyan</button>
                            <button onclick="cambiarColor([0,255,255,127])">Cyan Oscuro</button>
                            <button onclick="cambiarColor([0,0,255,255])">Azul</button>
                            <button onclick="cambiarColor([0,0,255,127])">Azul Oscuro</button>
                        </div>
                {% endif %}
                <hr>
            </div>
        
            <div class = "col-md-12">
                <canvas id="Canvas" width="1000" height="1000"
                        style="border: 1px solid #ffffff;
                        -ms-interpolation-mode: nearest-neighbor;
                        image-rendering: pixelated;
                        color:white; background-color: black;">
                    Activa JavaScript
                </canvas>
            </div>
        </div>

        
        
        <script id="VariablesGlobales" src="{% static 'Juego/js/VariablesGlobales.js' %}"></script>
        <script id="CargarGrilla" src="{% static 'Juego/js/CargarGrilla.js' %}"></script>
        <script id="ObtenerCoordenadasCursor" src="{% static 'Juego/js/ObtenerCoordenadasCursor.js' %}"></script>

        {% if user.is_authenticated %}

            <script id="Realizar Jugada" >   
                
                var csrftoken = '{{csrf_token}}';
                
                function EnviarJugada(color, X, Y, canvas)
                {
                    var datos = JSON.stringify({ x: X, y: Y, Color: color });
                    $.ajax(
                    {
                        headers: {"X-CSRFToken": csrftoken}, 
                        url: "/ajax/Jugada/",
                        dataType: "json",
                        type: "POST",
                        data: datos,
                    }).done(imprimir);
                }

                canvas.addEventListener('click', function(event) { 
                    var coordenadas = getCursorPosition(canvas, event);
                    EnviarJugada(color_to_paint, coordenadas[0], coordenadas[1]);
                    pintar(coordenadas[0], coordenadas[1], canvas, color_to_paint);                 
                });

                function MostrarJugada(data)
                {
                    console.log(data);      
                
                }


            </script>

        {% else %}
            <script id="Click">   
                canvas.addEventListener('click', function(event) { getCursorPosition(canvas, event); }) ;
            </script>
        {% endif %}

        
        

    
    </body>

{% endblock %}
