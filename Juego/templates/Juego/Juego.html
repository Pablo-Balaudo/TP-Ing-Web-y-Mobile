{% extends "Juego/Base.html" %}
{% load static %}


{% block titulo %}

    <title>Juego</title>

{% endblock titulo %}

{% block contenido %}
    
    <head>
        



    </head>

    <body>
        

        <section id="presentacion-juego">
            <div class="c-center">
                <h1 id="titulo">LIENZO ACTUAL</h1>
                <p>Â¡Pinta y colabora con gente de todo el mundo para hacer arte pixeleado!</p>
            </div>
        </section>
        <p id="x">Coord X</p>
        <p id="y">Coord Y</p>


        <div class="row">
            <div id="BotonesColores">
                {% if user.is_authenticated %}
                    <div class="btn-group" role="group" aria-label="Button group">
                        {% if request.user.is_superuser %}
                            <button onclick="drawBoard()">Reset</button>
                        {% endif %}

                        <button onclick="cambiarColor([255,255,255,255])">Blanco</button>

                        <button onclick="cambiarColor([255,255,255,127])">Plateado</button>

                        <button onclick="cambiarColor([127,127,127,127])">Gris</button>

                        <button onclick="cambiarColor([255,255,255,0])">Negro</button>

                        <button onclick="cambiarColor([255,0,0,255])">Rojo</button>

                        <button onclick="cambiarColor([255,0,0,127])">Rojo Oscuro</button>

                        <button onclick="cambiarColor([255,255,0,255])">Amarillo</button>

                        <button onclick="cambiarColor([255,255,0,127])">Amarillo Oscuro</button>

                        <button onclick="cambiarColor([255,0,255,255])">Rosado</button>

                        <button onclick="cambiarColor([255,0,255,127])">Rosado Oscuro</button>

                        <button onclick="cambiarColor([0,255,0,255])">Verde</button>

                        <button onclick="cambiarColor([0,255,0,127])">Verde Oscuro</button>

                        <button onclick="cambiarColor([0,255,255,255])">Cyan</button>

                        <button onclick="cambiarColor([0,255,255,127])">Cyan Oscuro</button>

                        <button onclick="cambiarColor([0,0,255,255])">Azul</button>

                        <button onclick="cambiarColor([0,0,255,127])">Azul Oscuro</button>
                    </div>
                {% endif %}                
            </div>
        
            <div class = "col-md-12">
                <canvas id="Canvas" width="1000" height="1000"
                        style="border: 1px solid #ffffff;
                        -ms-interpolation-mode: nearest-neighbor;
                        image-rendering: pixelated;
                        color:white; background-color: black;">
                    Activa JavaScript
                </canvas>
            </div>
        </div>

        
        
        <script id="VariablesGlobales" src="{% static 'Juego/js/VariablesGlobales.js' %}"></script>

        {% if user.is_authenticated %}
            <script id="RealizarJugada" src="{% static 'Juego/js/RealizarJugada.js' %}"></script>

            <script id="Clicks">   
            
                function EnviarJugada(color, X, Y)
                {
                    var csrftoken = '{{csrf_token}}';
                    var data = JSON.stringify({ x: X, y: Y, Color: color })
                    

                    $.ajax(
                    {
                        headers: {"X-CSRFToken": csrftoken}, 
                        url: "/ajax/Jugada/",
                        type: "POST",
                        dataType: "json",
                        data: data 
                    });  
                }

                canvas.addEventListener('click', function(event) { 
                    var coordenadas = getCursorPosition(canvas, event);
                    EnviarJugada(color_to_paint, coordenadas[0], coordenadas[1]);
                    pintar(coordenadas[0], coordenadas[1], canvas, color_to_paint);
                }) ;

            </script>
        {% endif %}

        
        <script id="CargarGrilla" src="{% static 'Juego/js/CargarGrilla.js' %}"></script>
        <script id="ObtenerCoordenadasCursor" src="{% static 'Juego/js/ObtenerCoordenadasCursor.js' %}"></script>

    
    </body>

{% endblock %}
